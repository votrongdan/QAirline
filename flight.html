<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Đặt vé máy bay</title>
</head>
<body>
    <?php if (!empty($flights_one_way)) : ?>
    <form method="post" action="book.php">
        <!-- Chuyến đi -->
        <h2>Chuyến đi:</h2>
        <table>
            <thead>
                <tr>
                    <th>Số hiệu chuyến bay</th>
                    <th>Thành phố khởi hành</th>
                    <th>Điểm đến</th>
                    <th>Thời gian khởi hành</th>
                    <th>Chọn hạng vé</th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($flights_one_way as $flight) : ?>
                <tr>
                    <td><?= htmlspecialchars($flight['FlightNumber']) ?></td>
                    <td><?= htmlspecialchars($flight['DepartureCity']) ?></td>
                    <td><?= htmlspecialchars($flight['ArrivalCity']) ?></td>
                    <td><?= htmlspecialchars($flight['DepartureTime']) ?></td>
                    <td>
                        <div>
                            <input type="radio" id="business_<?= $flight['FlightID'] ?>" name="flight_id" value="<?= htmlspecialchars($flight['FlightID']) ?>_business" required>
                            <label for="business_<?= $flight['FlightID'] ?>">Thương gia</label>
                        </div>
                        <div>
                            <input type="radio" id="economy_<?= $flight['FlightID'] ?>" name="flight_id" value="<?= htmlspecialchars($flight['FlightID']) ?>_economy">
                            <label for="economy_<?= $flight['FlightID'] ?>">Phổ thông</label>
                        </div>
                    </td>
                </tr>
                <?php endforeach; ?>
            </tbody>
        </table>

        <!-- Chuyến về -->
        <?php if (!empty($returnDate)) : ?>
        <h2>Chuyến về:</h2>
        <?php if (!empty($flights_return)) : ?>
        <table>
            <thead>
                <tr>
                    <th>Số hiệu chuyến bay</th>
                    <th>Thành phố khởi hành</th>
                    <th>Điểm đến</th>
                    <th>Thời gian khởi hành</th>
                    <th>Chọn hạng vé</th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($flights_return as $flight) : ?>
                <tr>
                    <td><?= htmlspecialchars($flight['FlightNumber']) ?></td>
                    <td><?= htmlspecialchars($flight['DepartureCity']) ?></td>
                    <td><?= htmlspecialchars($flight['ArrivalCity']) ?></td>
                    <td><?= htmlspecialchars($flight['DepartureTime']) ?></td>
                    <td>
                        <div>
                            <input type="radio" id="return_business_<?= $flight['FlightID'] ?>" name="return_flight_id" value="<?= htmlspecialchars($flight['FlightID']) ?>_business" required>
                            <label for="return_business_<?= $flight['FlightID'] ?>">Thương gia</label>
                        </div>
                        <div>
                            <input type="radio" id="return_economy_<?= $flight['FlightID'] ?>" name="return_flight_id" value="<?= htmlspecialchars($flight['FlightID']) ?>_economy">
                            <label for="return_economy_<?= $flight['FlightID'] ?>">Phổ thông</label>
                        </div>
                    </td>
                </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
        <?php else : ?>
        <p>Không tìm thấy chuyến bay về phù hợp.</p>
        <?php endif; ?>
        <?php endif; ?>

        <!-- Thông tin hành khách -->
        <h2>Thông tin hành khách:</h2>
        <div>
            <label for="name">Tên:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div>
            <label for="dob">Ngày sinh:</label>
            <input type="date" id="dob" name="dob" required>
        </div>
        <div>
            <label for="phone">Số điện thoại:</label>
            <input type="tel" id="phone" name="phone" required>
        </div>
        <div>
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <button type="submit">Đặt vé</button>
    </form>
    <?php else : ?>
    <p>Không tìm thấy chuyến bay đi phù hợp.</p>
    <?php endif; ?>
</body>
</html>